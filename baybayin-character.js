const themes = {    
    theme1: [
    { path: 'img2/A.png', description: 'A' },
    { path: 'img2/O.png', description: 'O/U' },
    { path: 'img2/I.png', description: 'E/I' },
    { path: 'img2/BA.png', description: 'BA' },
    { path: 'img2/BO.png', description: 'BO/BU' },
    { path: 'img2/BE.png', description: 'BE/BI' },
    { path: 'img2/B2.png', description: 'B' },
    { path: 'img2/KA.png', description: 'KA' },
    { path: 'img2/K.png', description: 'K' },
    { path: 'img2/KEKI.png', description: 'KE/KI' },
    { path: 'img2/KOKU.png', description: 'KO/KU' },
    { path: 'img2/DA.png', description: 'DA/RA' },
    { path: 'img2/D.png', description: 'D/R' },
    { path: 'img2/DE.png', description: 'DE/DI RE/RI' },
    { path: 'img2/DODU RORU.png', description: 'DO/DU RO/RU' },
    { path: 'img2/HA.png', description: 'HA' },
    { path: 'img2/H.png', description: 'H' },
    { path: 'img2/HEHI.png', description: 'HE/HI' },
    { path: 'img2/HOHU.png', description: 'HO/HU' },
    { path: 'img2/GA.png', description: 'GA' },
    { path: 'img2/G.png', description: 'G' },
    { path: 'img2/GEGI.png', description: 'GE/GI' },
    { path: 'img2/GOGU.png', description: 'GO/GU' },
    { path: 'img2/LA.png', description: 'LA' },
    { path: 'img2/L.png', description: 'L' },
    { path: 'img2/LELI.png', description: 'LE/LI' },
    { path: 'img2/LOLU.png', description: 'LO/LU' },
    { path: 'img2/MA.png', description: 'MA' },
    { path: 'img2/M.png', description: 'M' },
    { path: 'img2/MEMI.png', description: 'ME/MI' },
    { path: 'img2/MOMU.png', description: 'MO/MU' },
    { path: 'img2/N.png', description: 'N' },
    { path: 'img2/NENI.png', description: 'NE/NI' },
    { path: 'img2/NONU.png', description: 'NO/NU' },
    { path: 'img2/NGA.png', description: 'NGA' },
    { path: 'img2/NG.png', description: 'NG' },
    { path: 'img2/NGENGI.png', description: 'NGE/NGI' },
    { path: 'img2/NGONGU.png', description: 'NGO/NGU' },
    { path: 'img2/PA.png', description: 'PA' },
    { path: 'img2/P.png', description: 'P' },
    { path: 'img2/PEPI.png', description: 'PE/PI' },
    { path: 'img2/POPU.png', description: 'PO/PU' },
    { path: 'img2/SA.png', description: 'SA' },
    { path: 'img2/S.png', description: 'S' },
    { path: 'img2/SESI.png', description: 'SE/SI' },
    { path: 'img2/SOSU.png', description: 'SO/SU' },
    { path: 'img2/T.png', description: 'T' },
    { path: 'img2/TA.png', description: 'TA' },
    { path: 'img2/TETI.png', description: 'TE/TI' },
    { path: 'img2/TOTU.png', description: 'TO/TU' },
    { path: 'img2/WA.png', description: 'WA' },
    { path: 'img2/W.png', description: 'W' },
    { path: 'img2/WEWI.png', description: 'WE/WI' },
    { path: 'img2/WOWU.png', description: 'WO/WU' },
    { path: 'img2/YA.png', description: 'YA' },
    { path: 'img2/Y.png', description: 'Y' },
    { path: 'img2/YEYI.png', description: 'YE/YI' },
    { path: 'img2/YOYU.png', description: 'YO/YU' },

    ],
    theme2: [
    { path: 'img/A.png', description: 'A' },
    { path: 'img/O.png', description: 'O/U' },
    { path: 'img/I.png', description: 'E/I' },
    { path: 'img/BA.png', description: 'BA' },
    { path: 'img/BO.png', description: 'BO/BU' },
    { path: 'img/BE.png', description: 'BE/BI' },
    { path: 'img/B2.png', description: 'B' },
    { path: 'img/KA.png', description: 'KA' },
    { path: 'img/K.png', description: 'K' },
    { path: 'img/KEKI.png', description: 'KE/KI' },
    { path: 'img/KOKU.png', description: 'KO/KU' },
    { path: 'img/DA.png', description: 'DA/RA' },
    { path: 'img/D.png', description: 'D/R' },
    { path: 'img/DE.png', description: 'DE/DI RE/RI' },
    { path: 'img/DODU RORU.png', description: 'DO/DU RO/RU' },
    { path: 'img/HA.png', description: 'HA' },
    { path: 'img/H.png', description: 'H' },
    { path: 'img/HEHI.png', description: 'HE/HI' },
    { path: 'img/HOHU.png', description: 'HO/HU' },
    { path: 'img/GA.png', description: 'GA' },
    { path: 'img/G.png', description: 'G' },
    { path: 'img/GEGI.png', description: 'GE/GI' },
    { path: 'img/GOGU.png', description: 'GO/GU' },
    { path: 'img/LA.png', description: 'LA' },
    { path: 'img/L.png', description: 'L' },
    { path: 'img/LELI.png', description: 'LE/LI' },
    { path: 'img/LOLU.png', description: 'LO/LU' },
    { path: 'img/MA.png', description: 'MA' },
    { path: 'img/M.png', description: 'M' },
    { path: 'img/MEMI.png', description: 'ME/MI' },
    { path: 'img/MOMU.png', description: 'MO/MU' },
    { path: 'img/N.png', description: 'N' },
    { path: 'img/NENI.png', description: 'NE/NI' },
    { path: 'img/NONU.png', description: 'NO/NU' },
    { path: 'img/NGA.png', description: 'NGA' },
    { path: 'img/NG.png', description: 'NG' },
    { path: 'img/NGENGI.png', description: 'NGE/NGI' },
    { path: 'img/NGONGU.png', description: 'NGO/NGU' },
    { path: 'img/PA.png', description: 'PA' },
    { path: 'img/P.png', description: 'P' },
    { path: 'img/PEPI.png', description: 'PE/PI' },
    { path: 'img/POPU.png', description: 'PO/PU' },
    { path: 'img/SA.png', description: 'SA' },
    { path: 'img/S.png', description: 'S' },
    { path: 'img/SESI.png', description: 'SE/SI' },
    { path: 'img/SOSU.png', description: 'SO/SU' },
    { path: 'img/T.png', description: 'T' },
    { path: 'img/TA.png', description: 'TA' },
    { path: 'img/TETI.png', description: 'TE/TI' },
    { path: 'img/TOTU.png', description: 'TO/TU' },
    { path: 'img/WA.png', description: 'WA' },
    { path: 'img/W.png', description: 'W' },
    { path: 'img/WEWI.png', description: 'WE/WI' },
    { path: 'img/WOWU.png', description: 'WO/WU' },
    { path: 'img/YA.png', description: 'YA' },
    { path: 'img/Y.png', description: 'Y' },
    { path: 'img/YEYI.png', description: 'YE/YI' },
    { path: 'img/YOYU.png', description: 'YO/YU' },
    ],
};

let score = 0; // Initialize score counter

function updateScore(correct) {
if (correct) {
    score++;
} else {
    score = 0; // Reset score to 0 for wrong answer
}
document.getElementById("scoreValue").textContent = score;
}
const imageWidthInput = document.getElementById("imageWidth");
const imageWidthValue = document.getElementById("imageWidthValue");
// Listen for input change to update displayed value
imageWidthInput.addEventListener("input", function () {
    const width = imageWidthInput.value;
    imageWidthValue.textContent = width + 'px';
    updateImageWidth(width);
});

// Function to update image width
function updateImageWidth(width) {
    const images = document.querySelectorAll('#output img');
    images.forEach(image => {
        image.style.maxWidth = width + 'px';
    });
}

function shuffle(array) {
let currentIndex = array.length, temporaryValue, randomIndex;

while (currentIndex !== 0) {
    randomIndex = Math.floor(Math.random() * currentIndex);
    currentIndex -= 1;
    temporaryValue = array[currentIndex];
    array[currentIndex] = array[randomIndex];
    array[randomIndex] = temporaryValue;
}

return array;

}
const generateButton = document.getElementById("generate");
const outputDiv = document.getElementById("output");
const descriptionParagraph = document.getElementById("description");
const resultParagraph = document.getElementById("result");
const themeSelect = document.getElementById("themeSelect");

generateButton.addEventListener("click", function () {
const numImages = parseInt(document.getElementById("numImages").value);
const selectedTheme = themeSelect.value;
const themeCharacters = themes[selectedTheme];
const shuffledImages = shuffle(themeCharacters.slice());
const correctImageIndex = Math.floor(Math.random() * numImages);
const { description } = shuffledImages[correctImageIndex];
const imageWidth = parseInt(document.getElementById("imageWidth").value);
outputDiv.innerHTML = "";
descriptionParagraph.textContent = description;
let outputHTML = "";
for (let i = 0; i < numImages; i++) {
    const { path } = shuffledImages[i];
    outputHTML += `
        <div>
            <img src="${path}" alt="Random Image" data-description="${description}" data-index="${i}" style="max-width: ${imageWidth}px;">
        </div>
    `;
}
outputDiv.innerHTML = outputHTML;
const images = document.querySelectorAll('#output img');
images.forEach(image => {
    image.addEventListener('click', () => {
        const clickedDescription = image.getAttribute('data-description');
        const clickedIndex = parseInt(image.getAttribute('data-index'));
        const isCorrect = clickedIndex === correctImageIndex;
        updateScore(isCorrect); // Update score based on correctness
        if (!isCorrect) {
                image.classList.add('shake'); // Add the shake class for incorrect answer
                setTimeout(() => {
                    image.classList.remove('shake'); 
                }, 500);
        }
        if (isCorrect) {
            resultParagraph.classList.add('correct');
            resultParagraph.classList.remove('wrong');
            resultParagraph.innerText = 'Correct!';
            setTimeout(() => {
                generateButton.click(); 
            }, 100);
        }
         else {
            resultParagraph.classList.add('wrong');
            resultParagraph.classList.remove('correct');
            resultParagraph.innerText = 'Wrong!';
        }
    });
});
});